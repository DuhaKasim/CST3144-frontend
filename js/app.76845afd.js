(function(){"use strict";var e={542:function(e,t,s){var o=s(5130),n=s(6768);const a={class:"page-wrap"};function r(e,t,s,o,r,l){const c=(0,n.g2)("NavBar"),i=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)("div",a,[(0,n.bF)(c),(0,n.bF)(i)])}var l=s(4232);const c={class:"nav-bar"},i=["src"],u={class:"center-nav"},d={key:1,class:"cart-empty-btn",disabled:""};function p(e,t,s,o,a,r){const p=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",c,[(0,n.bF)(p,{to:"/lessons",class:"logo-wrap"},{default:(0,n.k6)(()=>[(0,n.Lk)("img",{src:o.logo,class:"logo"},null,8,i)]),_:1}),(0,n.Lk)("div",u,[(0,n.bF)(p,{to:"/",class:"nav-link"},{default:(0,n.k6)(()=>[...t[0]||(t[0]=[(0,n.eW)("Home",-1)])]),_:1}),(0,n.bF)(p,{to:"/lessons",class:"nav-link"},{default:(0,n.k6)(()=>[...t[1]||(t[1]=[(0,n.eW)("Lessons",-1)])]),_:1})]),o.cartCount>0?((0,n.uX)(),(0,n.Wv)(p,{key:0,to:"/cart",class:"cart-link"},{default:(0,n.k6)(()=>[(0,n.Lk)("button",null,"Shopping Cart ("+(0,l.v_)(o.cartCount)+")",1)]),_:1})):((0,n.uX)(),(0,n.CE)("button",d," Cart Empty "))])}var m=s(144),h=s.p+"img/logo.ad706654.png",v={name:"NavBar",setup(){const e=h,t=(0,m.KR)(0),s=()=>{const e=JSON.parse(localStorage.getItem("cartItems")||"[]");t.value=e.length};return(0,n.sV)(()=>{s(),window.addEventListener("storage",s)}),{logo:e,cartCount:t}}},f=s(1241);const g=(0,f.A)(v,[["render",p]]);var k=g,L={name:"App",components:{NavBar:k}};const C=(0,f.A)(L,[["render",r]]);var y=C,b=s(8512);const S={class:"page-wrap"},E={key:0},w={class:"checkout-form"},_={key:0,class:"error-msg"},I={key:1,class:"error-msg"},O={key:2,class:"error-msg"},F=["disabled"],X={key:1};function N(e,t,s,a,r,l){const c=(0,n.g2)("ShoppingCartList");return(0,n.uX)(),(0,n.CE)("div",S,[t[4]||(t[4]=(0,n.Lk)("h1",null,"Shopping Cart",-1)),r.cartItems.length>0?((0,n.uX)(),(0,n.CE)("div",E,[(0,n.bF)(c,{lessons:r.cartItems,onRemoveFromCart:l.removeFromCart},null,8,["lessons","onRemoveFromCart"]),(0,n.Lk)("div",w,[(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),placeholder:"Enter your full name"},null,512),[[o.Jo,r.name]]),r.name&&!l.validName?((0,n.uX)(),(0,n.CE)("p",_,"Name must contain letters only.")):(0,n.Q3)("",!0),(0,n.bo)((0,n.Lk)("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>r.phone=e),placeholder:"Enter your phone number"},null,512),[[o.Jo,r.phone]]),r.phone&&!l.validPhone?((0,n.uX)(),(0,n.CE)("p",I,"Phone must contain numbers only.")):(0,n.Q3)("",!0),(0,n.bo)((0,n.Lk)("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=e=>r.email=e),placeholder:"Enter your email"},null,512),[[o.Jo,r.email]]),r.email&&!l.validEmail?((0,n.uX)(),(0,n.CE)("p",O,"Enter a valid email.")):(0,n.Q3)("",!0),(0,n.Lk)("button",{class:"checkout-button",disabled:!l.canCheckout,onClick:t[3]||(t[3]=(...e)=>l.checkout&&l.checkout(...e))}," Proceed to Checkout ",8,F)])])):((0,n.uX)(),(0,n.CE)("div",X," You currently have no items in your cart! "))])}s(8111),s(2489);const A={class:"lessons-container"},P={class:"cart-img-wrap"},J=["src"],T={class:"cart-details"},j=["onClick"];function Q(e,t,s,o,a,r){return(0,n.uX)(),(0,n.CE)("div",A,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(s.lessons,t=>((0,n.uX)(),(0,n.CE)("div",{class:"cart-item",key:t._id},[(0,n.Lk)("div",P,[(0,n.Lk)("img",{src:t.imageUrl,alt:"Lesson Image"},null,8,J)]),(0,n.Lk)("div",T,[(0,n.Lk)("h3",null,(0,l.v_)(t.name),1),(0,n.Lk)("p",null,(0,l.v_)(t.price),1),(0,n.Lk)("p",null,(0,l.v_)(t.location),1),(0,n.Lk)("p",null,"Spaces left: "+(0,l.v_)(t.spaces??10),1),(0,n.Lk)("button",{class:"remove-button",onClick:s=>e.$emit("remove-from-cart",t.id)}," Remove ",8,j)])]))),128))])}var x={name:"ShoppingCartList",props:["lessons"]};const U=(0,f.A)(x,[["render",Q]]);var V=U,$={name:"ShoppingCartPage",components:{ShoppingCartList:V},data(){return{cartItems:[],name:localStorage.getItem("checkout_name")||"",phone:localStorage.getItem("checkout_phone")||"",email:localStorage.getItem("checkout_email")||""}},computed:{validName(){return/^[A-Za-z\s]+$/.test(this.name)},validPhone(){return/^[0-9]{10,11}$/.test(this.phone)},validEmail(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.email)},canCheckout(){return this.validName&&this.validPhone&&this.validEmail}},methods:{updateCartFromStorage(){const e=localStorage.getItem("cartItems");e&&(this.cartItems=JSON.parse(e).filter(e=>e))},async removeFromCart(e){await fetch(`https://cst3144-backend-3vp3.onrender.com/api/orders/12345/cart/${e}`,{method:"DELETE"});const t=this.cartItems.filter(t=>t.id!==e);this.cartItems=t,localStorage.setItem("cartItems",JSON.stringify(t)),window.dispatchEvent(new Event("storage"))},checkout(){localStorage.setItem("checkout_name",this.name),localStorage.setItem("checkout_phone",this.phone),localStorage.setItem("checkout_email",this.email),alert("Checkout complete! Thank you ")}},created(){this.updateCartFromStorage()}};const B=(0,f.A)($,[["render",N]]);var D=B;const R={class:"detail-page"},K={key:0,class:"detail-card"},W=["src"],M={class:"detail-title"},z={class:"detail-price"},H={class:"detail-location"},Y={class:"detail-spaces"},Z=["disabled"];function q(e,t,s,o,a,r){return(0,n.uX)(),(0,n.CE)("div",R,[a.lesson&&a.lesson._id?((0,n.uX)(),(0,n.CE)("div",K,[(0,n.Lk)("img",{src:a.lesson.imageUrl,class:"detail-img"},null,8,W),(0,n.Lk)("div",M,(0,l.v_)(a.lesson.name),1),(0,n.Lk)("div",z,(0,l.v_)(a.lesson.price),1),(0,n.Lk)("div",H,(0,l.v_)(a.lesson.location),1),(0,n.Lk)("div",Y,"Spaces left: "+(0,l.v_)(a.lesson.spaces??10),1),(0,n.Lk)("button",{class:"detail-btn",disabled:0===a.lesson.spaces,onClick:t[0]||(t[0]=(...e)=>r.addToCart&&r.addToCart(...e))},(0,l.v_)(0===a.lesson.spaces?"Sold Out":"Add to Cart"),9,Z)])):(0,n.Q3)("",!0)])}s(4114);var G={name:"LessonsDetailPage",data(){return{lesson:null,cartItems:[]}},methods:{async addToCart(){if(!this.lesson||!this.lesson.id)return;await fetch("https://cst3144-backend-3vp3.onrender.com/api/orders/12345/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:this.lesson.id})}),alert("Lesson added to cart!"),this.lesson.spaces>0&&(this.lesson.spaces-=1);const e=JSON.parse(localStorage.getItem("cartItems")||"[]");e.push(this.lesson),localStorage.setItem("cartItems",JSON.stringify(e)),window.dispatchEvent(new Event("storage"))}},async created(){const e=this.$route.params.lessonId,t=await fetch(`https://cst3144-backend-3vp3.onrender.com/api/lessons/${e}`);this.lesson=await t.json()}};const ee=(0,f.A)(G,[["render",q]]);var te=ee;const se={class:"page-wrap"};function oe(e,t,s,o,a,r){const l=(0,n.g2)("LessonsList");return(0,n.uX)(),(0,n.CE)("div",se,[t[0]||(t[0]=(0,n.Lk)("h1",null,"Lessons",-1)),(0,n.bF)(l,{lessons:a.lessons},null,8,["lessons"])])}s(1701);const ne={class:"controls"},ae={class:"grid-wrap"},re=["src"],le={class:"lesson-name"},ce={class:"lesson-price"},ie={class:"lesson-location"},ue={class:"spaces-left"};function de(e,t,s,a,r,c){const i=(0,n.g2)("router-link");return(0,n.uX)(),(0,n.CE)("div",null,[(0,n.Lk)("div",ne,[(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.searchQuery=e),type:"text",placeholder:"Search by class name...",class:"search-input"},null,512),[[o.Jo,r.searchQuery]]),(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.sortField=e),class:"sort-dropdown"},[...t[3]||(t[3]=[(0,n.Fv)('<option value="">Sort By</option><option value="name">Name</option><option value="location">Location</option><option value="price">Price</option><option value="spaces">Spaces</option>',5)])],512),[[o.u1,r.sortField]]),(0,n.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>c.toggleSortOrder&&c.toggleSortOrder(...e)),class:"sort-button"},(0,l.v_)("asc"===r.sortOrder?"⬆ Asc":"⬇ Desc"),1)]),(0,n.Lk)("div",ae,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(c.filteredSortedLessons,e=>((0,n.uX)(),(0,n.CE)("div",{class:"lesson-item",key:e.id},[(0,n.Lk)("img",{src:e.imageUrl},null,8,re),(0,n.Lk)("h3",le,(0,l.v_)(e.name),1),(0,n.Lk)("p",ce,(0,l.v_)(e.price),1),(0,n.Lk)("p",ie,(0,l.v_)(e.location),1),(0,n.Lk)("p",ue,"Spaces left: "+(0,l.v_)(e.spaces??10),1),(0,n.bF)(i,{to:"/lessons/"+e.id},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.Lk)("button",null,"View Details",-1)])]),_:1},8,["to"])]))),128))])])}var pe={props:["lessons"],data(){return{searchQuery:"",sortField:"",sortOrder:"asc"}},computed:{filteredSortedLessons(){let e=[...this.lessons];if(""!==this.searchQuery.trim()){const t=this.searchQuery.toLowerCase();e=e.filter(e=>e.name.toLowerCase().includes(t))}return this.sortField&&e.sort((e,t)=>{let s=e[this.sortField],o=t[this.sortField];return"string"===typeof s&&(s=s.toLowerCase()),"string"===typeof o&&(o=o.toLowerCase()),"asc"===this.sortOrder?s>o?1:-1:s<o?1:-1}),e}},methods:{toggleSortOrder(){this.sortOrder="asc"===this.sortOrder?"desc":"asc"}}};const me=(0,f.A)(pe,[["render",de]]);var he=me,ve={name:"LessonsPageView",components:{LessonsList:he},data(){return{lessons:[]}},async created(){await this.fetchLessons()},methods:{async fetchLessons(){try{const e=await fetch("https://cst3144-backend-3vp3.onrender.com/api/lessons"),t=await e.json();Array.isArray(t)&&(this.lessons=t.filter(e=>null!==e).map(e=>({...e})))}catch(e){console.error(e)}}}};const fe=(0,f.A)(ve,[["render",oe]]);var ge=fe;function ke(e,t,s,o,a,r){return(0,n.uX)(),(0,n.CE)("h1",null,"404: Page Not Found")}var Le={name:"NotFoundPage"};const Ce=(0,f.A)(Le,[["render",ke]]);var ye=Ce;(0,o.Ef)(y).use(b.aE({history:b.LA(),routes:[{path:"/",redirect:"/lessons"},{path:"/cart",component:D},{path:"/lessons",component:ge},{path:"/lessons/:lessonId",component:te},{path:"/:pathMatch(.*)*",component:ye}]})).mount("#app")}},t={};function s(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,s),a.exports}s.m=e,function(){var e=[];s.O=function(t,o,n,a){if(!o){var r=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],a=e[u][2];for(var l=!0,c=0;c<o.length;c++)(!1&a||r>=a)&&Object.keys(s.O).every(function(e){return s.O[e](o[c])})?o.splice(c--,1):(l=!1,a<r&&(r=a));if(l){e.splice(u--,1);var i=n();void 0!==i&&(t=i)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,n,a]}}(),function(){s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,{a:t}),t}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.p="/CST3144-frontend/"}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,r=o[0],l=o[1],c=o[2],i=0;if(r.some(function(t){return 0!==e[t]})){for(n in l)s.o(l,n)&&(s.m[n]=l[n]);if(c)var u=c(s)}for(t&&t(o);i<r.length;i++)a=r[i],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(u)},o=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],function(){return s(542)});o=s.O(o)})();
//# sourceMappingURL=app.76845afd.js.map